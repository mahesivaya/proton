<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>

    body {
      font-family: Arial, sans-serif;
      background: #f6f7fb;
      text-align: center;
      padding: 40px;
    }
    .chart-container {
      width: 80%;
      max-width: 800px;
      margin: auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      padding: 20px;
    }
    h2 {
      margin-bottom: 20px;
      color: #333;
        form { margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 8px; border: 1px solid #ddd; text-align: left; }
        th { background-color: #f5f5f5; }
    }
    </style>
</head>
<body>
    <a href="{% url 'redirect_to_home' %}" class="btn btn-primary">üè† Back to Home</a>

    <h2>Patients Registered Per Day in {{ month_name }} {{ year }}</h2>

    <canvas id="dailyChart" width="400" height="200"></canvas>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
      const labels = {{ labels|safe }};
      const data = {{ values|safe }};
    
      const ctx = document.getElementById('dailyChart').getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: 'Patients Registered',
            data: data,
            backgroundColor: 'rgba(75, 192, 192, 0.6)',
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            title: {
              display: true,
              text: 'Patients per Day - {{ month_name }} {{ year }}'
            }
          },
          scales: {
            x: {
              title: { display: true, text: 'Day of Month' },
              ticks: { stepSize: 1 }
            },
            y: {
              beginAtZero: true,
              title: { display: true, text: 'Number of Patients' }
            }
          }
        }
      });
    </script>
    

    <style>
        /* ===== Table with Borders on Rows and Columns ===== */
        .table-container {
          width: 95%;
          margin: 20px auto;
          font-family: "Segoe UI", Roboto, Arial, sans-serif;
          background: #ffffff;
          border: 1px solid #d1d5db; /* Outer border */
          border-radius: 8px;
          overflow-x: auto;
          box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        
        .table-container h2 {
          text-align: center;
          margin: 15px 0;
          color: #1f2937;
        }
        
        .table-bordered {
          width: 100%;
          border-collapse: collapse; /* ensures clean, merged borders */
        }
        
        .table-bordered th,
        .table-bordered td {
          border: 1px solid #cbd5e1; /* visible border for all rows/columns */
          padding: 10px 14px;
          text-align: left;
          font-size: 14px;
        }
        
        .table-bordered thead {
          background: #2563eb; /* blue header */
          color: #fff;
        }
        
        .table-bordered th {
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.4px;
        }
        
        .table-bordered tbody tr:nth-child(even) {
          background: #f9fafb; /* zebra stripe */
        }
        
        .table-bordered tbody tr:hover {
          background: #eff6ff; /* light blue hover */
          transition: background 0.2s ease-in-out;
        }
        
        .table-container p {
          text-align: center;
          color: #6b7280;
          padding: 20px;
        }
        </style>
        
        <div class="table-container">
          {% if patients %}
            <h2>Patients of {{ month_name }} {{ year }}</h2>
            <table class="table-bordered">
              <thead>
                <tr>
                  <th>Patient ID</th>
                  <th>Name</th>
                  <th>Registered At</th>
                  <th>Fee Paid</th>
                </tr>
              </thead>
              <tbody>
                {% for p in patients %}
                <tr>
                  <td>{{ p.patient_id }}</td>
                  <td>{{ p.first_name }} {{ p.last_name }}</td>
                  <td>{{ p.registered_at|date:"Y-m-d H:i" }}</td>
                  <td>{{ p.fee }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          {% elif year and month %}
            <p>No patients found for {{ month_name }} {{ year }}.</p>
          {% endif %}
        </div>
        

</body>
</html>