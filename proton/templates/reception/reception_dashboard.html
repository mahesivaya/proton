<a href="{% url 'reception_dashboard' %}" class="btn btn-danger mt-3">Home</a>
{% block content %}
<div class="card mx-auto text-center" style="max-width: 400px;">
    <div class="card-body">
        <h3 class="card-title">Welcome, {{request.user.username}} Reception dashboard!</h3>
        <br><br>
        <P>Register Patients</P>
        <form method="POST" enctype="multipart/form-data">

            {% csrf_token %}
            <div class="txt_field">
                <label>First Name</label>
                <input type="text" required name="first_name"><br>
              </div>

              <div class="txt_field">
                <label>Last Name</label>
                <input type="text" required name="last_name">
              </div>

              <div class="txt_field">
                <label>Age</label>
                <input type="text" required name="age">
              </div>

              <div class="txt_field">
                <label>Email</label>
                <input type="text" required name="email">
              </div>

              <div class="txt_field">
                <label>Phone Number</label>
                <input type="text" required name="phone_number">
              </div>

              <div class="txt_field">
                <label>Address</label>
                <input type="text" name="address">
              </div>

            <input class="txt_field" type="submit" value="Submit">
          </form>

        <br><br>
        <P>Registered Patients</P>
        <table border="1" cellpadding="8" cellspacing="0">
            <thead>
              <tr>
                <th>ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>age</th>
                <th>Registered On</th>
                <th>More Details</th>
              </tr>
            </thead>
            <tbody>
              {% for patient in all_patients %}
                <tr>
                  <td>{{ patient.id }}</td>
                  <td>{{ patient.first_name }}</td>
                  <td>{{ patient.last_name }}</td>
                  <td>{{ patient.age }}</td>
                  <td>{{ patient.registered_at|date:"Y-m-d H:i" }}</td>
                  <td>
                    <a href="{% url 'patient_details' patient.id %}">
                    <button type="button">Details</button></a></tr>
                </tr>
              {% empty %}
                <tr><td colspan="7">No patients registered yet.</td></tr>
                <tr class="collapse" id="details/{{ patient.id }}">
                    <td colspan="5">
                      <div class="card card-body">
                        <p><strong>Phone Number:</strong> {{ patient.phone_number }}</p>
                        <p><strong>Registered On:</strong> {{ patient.created_at|date:"Y-m-d H:i" }}</p>
                      </div>
                    </td>
                  </tr>
              {% endfor %}
            </tbody>
          </table>

        <br><br>
        <a href="{% url 'logout' %}" class="btn btn-danger mt-3">Logout</a>
    </div>
</div>
{% endblock %}
